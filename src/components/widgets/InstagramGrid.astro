---
/**
 * Instagram Grid Component
 * Displays multiple Instagram embeds in a responsive grid.
 * Loads the Instagram embed.js script once at the end.
 *
 * Usage:
 *   <InstagramGrid posts={[{ url, caption }]} title="See Å½njan on Instagram" />
 */
import InstagramEmbed from './InstagramEmbed.astro';

interface Post {
  url: string;
  caption?: string;
}

interface Props {
  /** Array of Instagram post objects */
  posts: Post[];
  /** Optional section title */
  title?: string;
  /** Optional subtitle */
  subtitle?: string;
  /** Number of columns on desktop (default: 2) */
  columns?: 2 | 3;
}

const { posts, title, subtitle, columns = 2 } = Astro.props;

const gridCols = columns === 3 ? 'lg:grid-cols-3' : 'lg:grid-cols-2';
---

<section class="py-12">
  {title && (
    <div class="text-center mb-8">
      <h2 class="text-2xl md:text-3xl font-bold text-warm-900">{title}</h2>
      {subtitle && <p class="text-warm-600 mt-2">{subtitle}</p>}
    </div>
  )}
  <div class={`grid grid-cols-1 ${gridCols} gap-6 max-w-5xl mx-auto`}>
    {posts.map((post) => (
      <InstagramEmbed url={post.url} caption={post.caption} />
    ))}
  </div>
</section>

<!-- Load Instagram embed script once, after all embeds -->
<script async src="https://www.instagram.com/embed.js"></script>
